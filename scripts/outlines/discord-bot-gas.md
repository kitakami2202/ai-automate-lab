# 記事ブリーフ: discord-bot-gas（リライト）

## 基本情報

| 項目 | 内容 |
|------|------|
| slug | discord-bot-gas |
| primary_kw | Discord Bot GAS 連携 |
| secondary_kw | Discord 通知 自動化, Discord スプレッドシート |
| Layer | execution（Layer 2） |
| 記事タイプ | howto |
| クラスター | discord-bot |
| 想定文字数 | 3,000〜5,000文字 |
| ターゲット読者 | 中小企業の事務担当者・経営者で、社内Discordへの通知自動化に関心がある人 |
| difficulty | beginner |
| timeToRead | 15 |
| totalTime | PT45M |

## 現状記事の課題

| 課題 | 詳細 |
|------|------|
| 文字数不足 | 約500文字。目標3,000〜5,000文字に対して大幅に不足 |
| Webhook URLハードコード | `const DISCORD_WEBHOOK_URL = '...'` でURL直書き |
| エラーハンドリングなし | try-catchなし、レスポンスコード未確認 |
| 表が0個 | 品質ルール違反 |
| 内部リンク0本 | 本文中に関連記事へのリンクが0本 |
| 定義文なし | 各H2冒頭に定義がない |
| description不足 | 約80文字。120-160文字の範囲外 |
| titleにprimary_kwなし | 「Discord Bot GAS 連携」が含まれていない |
| FAQ 3個のみ | 5個に増やす必要あり。回答も薄い |
| ピラーリンクなし | howto記事冒頭のLayer 1導線がない |
| relatedArticlesに別カテゴリなし | 同カテゴリのみ |
| 前提条件テーブルなし | howtoテンプレートの必須要素が欠落 |

## 競合分析サマリ

### 上位5記事

| # | 記事 | 深さ | 鮮度 | 独自性 | 弱点 |
|---|------|------|------|--------|------|
| 1 | TSfCM（Discord API × GAS） | コード付き | 2024/12 | Udemy講師 | エラーハンドリングなし |
| 2 | Zenn（収支管理Bot） | コード+反省点 | 2021/05 | 個人利用の実例 | 古い、エラー処理不足 |
| 3 | CARTA TECH BLOG（入室通知Bot） | コード付き | 2021/05 | 企業ブログ | Python実装のみ、GASなし |
| 4 | RTAGamers（ノルマ管理Bot） | コピペサンプル | 2022/10 | 大規模イベント実例 | 詳細不明 |
| 5 | sekaishi-beta（通知Bot） | コード付き | 2023/01 | 日付指定送信 | エラー処理なし |

### 必須トピック（3記事以上でカバー）
- Webhook URL設定手順（Discord側）
- 基本的なメッセージ送信（UrlFetchApp.fetch）
- スプレッドシートからのデータ読み込み
- 時間ベーストリガー設定

### 差別化チャンス（1-2記事のみカバー）
- Embeds（埋め込み）の詳細実装（1記事のみ）
- メンション機能（1-2記事）

### 独自トピック候補（どの記事もカバーなし）
- エラーハンドリング+レスポンスコード確認（全競合が欠落）
- Webhook URLのスクリプトプロパティ管理（全競合がハードコード）
- トラブルシューティング表
- 中小企業向け通知シナリオ（在庫アラート、受注通知、日次レポート）
- 条件分岐ロジック（閾値アラート）

## 差別化ポイント

| パターン | 採用 | 根拠 |
|---------|------|------|
| 実装コード差別化 | **採用** | 全競合がエラーハンドリングなし。try-catch+レスポンスコード確認+スクリプトプロパティ管理で差別化 |
| 実務経験差別化 | **採用** | 競合はWebhook送信で終了。スプレッドシート連携の条件付き通知シナリオを提示 |
| 網羅性差別化 | **採用** | トラブルシューティング表・制限事項表を含む記事がゼロ |
| 構造化差別化 | **採用** | 前提条件テーブル、トラブルシューティング表で構造化 |

## 見出し構成案

### H2-1: この記事で作るもの（完成イメージ）
- 処理フロー図解: トリガー or スプレッドシート変更 → GAS → Discord通知
- 完成時にできること3点
- 無料で運用できることの明記

### H2-2: 準備・環境構築
- DiscordサーバーでのWebhook作成手順
- GASプロジェクト作成・スクリプトプロパティにWebhook URL保存
- 準備項目テーブル

### H2-3: 実装手順
- ステップ1: 基本通知（テキストメッセージ送信 + エラーハンドリング）
- ステップ2: スプレッドシート連携通知（値を読み取って条件付き通知）
- ステップ3: Embedメッセージ（リッチな通知）
- ステップ4: トリガーによる定期実行

### H2-4: 動作確認・トラブルシューティング
- 動作確認手順
- よくあるエラー表（6行）

### H2-5: 応用・カスタマイズ例
- 中小企業向けシナリオ3選
- GASの制限事項表

## FAQ案（5問）

| # | 質問 | 回答の方向性 |
|---|------|------------|
| 1 | GASでDiscord Botを作るのに費用はかかりますか？ | GAS無料+Discord Webhook無料。サーバー費用ゼロで運用可能 |
| 2 | Discord WebhookとBot Tokenの違いは何ですか？ | Webhookはメッセージ送信専用の簡易手段。Bot Tokenは双方向やり取り可能。この記事はWebhookを使用 |
| 3 | Webhook URLが漏洩した場合のリスクは？ | URLを知る人は誰でもそのチャンネルにメッセージ送信可能。スクリプトプロパティで管理し、漏洩時は再発行 |
| 4 | Discord通知が届かないときは？ | 主な原因4つ：Webhook URL設定ミス、Webhook削除済み、JSON形式エラー、GASのUrlFetch制限到達 |
| 5 | GASからDiscordにファイルや画像を送信できますか？ | Webhookでは直接ファイル送信は不可。画像はEmbed内のimage URLで表示可能。ファイル送信にはBot Token+multipart/form-dataが必要 |

## 内部リンク候補

| リンク先 | 種別 | 配置場所 |
|---------|------|---------|
| gas/gas-basics | GASピラー | 冒頭導線 + まとめ |
| discord-bot/discord-slash-commands | 同カテゴリ | H2-5 応用例 |
| discord-bot/discord-spreadsheet-db | 同カテゴリ | H2-3 ステップ2 + H2-5 |
| gas/gas-slack-notification | 別カテゴリ | H2-5 比較 |

## ライターへの指示

1. **Webhook URLのスクリプトプロパティ管理必須**: `PropertiesService.getScriptProperties().getProperty('DISCORD_WEBHOOK_URL')` を使用。ハードコード禁止
2. **全コードにtry-catch + レスポンスコード確認**: 全競合が欠落している最大の差別化ポイント
3. **Embedメッセージ**: 競合の多くが基本テキストのみ。color, fields, timestamp付きのEmbed実装を含める
4. **Discordスプレッドシート連携**: 副KWを自然に使いつつ、スプレッドシート値読み取り→条件付き通知の実装を含める
5. **表を最低3つ**: 前提条件、トラブルシューティング、制限事項
6. **discord-botクラスターにはピラー記事がないため**: 冒頭導線はgas/gas-basicsへのリンクとする
