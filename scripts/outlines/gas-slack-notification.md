# 記事ブリーフ: gas-slack-notification（リライト）

## 基本情報

| 項目 | 内容 |
|------|------|
| slug | gas-slack-notification |
| primary_kw | GAS Slack 通知 |
| secondary_kw | Slack 自動通知, スプレッドシート Slack |
| Layer | execution（Layer 2） |
| 記事タイプ | howto |
| クラスター | gas（ピラー: gas-basics） |
| 想定文字数 | 4,000〜5,000文字 |
| ターゲット読者 | 中小企業の事務担当者・経営者で、チーム通知の自動化に関心がある人 |
| difficulty | intermediate |
| timeToRead | 15 |
| totalTime | PT30M |

## 現状記事の課題

| 課題 | 詳細 |
|------|------|
| 文字数不足 | 約600文字。目標3,000〜5,000文字に対して大幅に不足 |
| Layer間導線なし | 冒頭にピラー記事（gas-basics）へのリンクがない |
| 前提条件テーブルなし | howtoテンプレートの必須要素が欠落 |
| Webhook URLハードコード | `const SLACK_WEBHOOK_URL = '...'` でトークン直書き |
| エラーハンドリングなし | try-catchなし、レスポンスコード未確認 |
| トラブルシューティングなし | 「動かない」ときの対処法がゼロ |
| 表が0個 | 品質ルール違反 |
| 内部リンクなし | 本文中に関連記事へのリンクが0本 |
| FAQ 3個のみ | 5個必要。回答も1-2文で薄い |
| 定義文なし | 各H2冒頭に定義がない |

## 競合分析サマリ

### 上位5記事

| # | 記事 | 深さ | 鮮度 | 独自性 | 弱点 |
|---|------|------|------|--------|------|
| 1 | note（スキプラ） | 手順+コード付き | 2023/01 | 実務経験ベース | エラーハンドリングなし、セキュリティ不足 |
| 2 | CANVAS | コード+実務Tips | 2025/07 | スレッド通知・メッセージ装飾 | エラーハンドリングなし、パフォーマンス考慮なし |
| 3 | Qiita（sy_k） | コード+実装ガイド | 2024/12 | 完全なコード例 | 複数チャネル対応なし、認証管理説明なし |
| 4 | inakaonline | コード付き | 2025/04 | 基本実装例 | セキュリティなし、デバッグ方法なし |
| 5 | Qiita（chihiro） | コード+手順 | 2017/08 | オリジナルコード | 8年前で古い、Slack UI変更未対応 |

### 必須トピック（3記事以上でカバー）
- Incoming Webhooks設定手順（Slack側でのURL取得）
- GASコード実装（UrlFetchApp.fetch）
- トリガー設定による定期自動化
- メッセージカスタマイズ（ユーザー名・アイコン）
- 実務ユースケース（スプレッドシート連携）

### 差別化チャンス（1-2記事のみカバー）
- Block Kitによるリッチメッセージ（1記事のみ）
- メンション機能（`<@UserID>`, `<!channel>`）の実装（1記事のみ）
- スレッド内通知（1記事のみ）

### 独自トピック候補（どの記事もカバーなし）
- エラーハンドリング+レスポンスコード確認（全競合が欠落）
- Webhook URLのスクリプトプロパティ管理（全競合がハードコード or 説明不足）
- トラブルシューティング表（どの記事もなし）
- 中小企業向け通知シナリオ（条件付き通知、期日アラート）
- スプレッドシート値変更検知→Slack通知の実装

## 差別化ポイント

| パターン | 採用 | 根拠 |
|---------|------|------|
| 実装コード差別化 | **採用** | 全競合がエラーハンドリングなし。try-catch+レスポンスコード確認+スクリプトプロパティ管理で差別化 |
| 実務経験差別化 | **採用** | 競合はWebhook送信で終了。スプレッドシート連携の条件付き通知シナリオを提示 |
| 網羅性差別化 | **採用** | トラブルシューティング表・制限事項表を含む記事がゼロ |
| 構造化差別化 | **採用** | 前提条件テーブル、トラブルシューティング表で構造化 |

## 見出し構成案

### H2-1: この記事で作るもの（完成イメージ）
- 処理フロー図解: トリガー or スプレッドシート変更 → GAS → Slack通知
- 完成時にできること3点
- 無料で運用できることの明記

### H2-2: 準備・環境構築
- Slackワークスペースでのアプリ作成・Incoming Webhooks設定手順
- GASプロジェクト作成・スクリプトプロパティにWebhook URL保存
- 準備項目テーブル

### H2-3: 実装手順
- ステップ1: 基本通知（テキストメッセージ送信 + エラーハンドリング）
- ステップ2: スプレッドシート連携通知（値を読み取って通知）
- ステップ3: リッチメッセージ（Block Kit）+ メンション
- ステップ4: トリガーによる定期実行

### H2-4: 動作確認・トラブルシューティング
- 動作確認手順
- よくあるエラー表（6行）

### H2-5: 応用・カスタマイズ例
- 中小企業向けシナリオ3選
- GASの制限事項表

## FAQ案（5問）

| # | 質問 | 回答の方向性 |
|---|------|------------|
| 1 | GASからSlack通知を送るのに費用はかかりますか？ | GAS無料+Slack無料プランで利用可能。無料プランではアプリ10個まで。有料プランの詳細はSlack公式（時点明記） |
| 2 | Webhook URLが漏洩した場合のリスクは？ | URLを知る人は誰でもそのチャンネルにメッセージ送信可能。スクリプトプロパティで管理し、定期的にURLを再発行 |
| 3 | GASからSlackにメンションを送れますか？ | `<@MemberID>`形式で個人メンション可能。`<!channel>`で全員通知。Member IDはSlackプロフィールから取得 |
| 4 | Slack通知が届かないときは？ | 主な原因4つ：Webhook URL設定ミス、アプリ未インストール、チャネル指定ミス、GASのUrlFetch制限到達 |
| 5 | GASからSlackにファイルを送信できますか？ | Incoming Webhookではファイル送信不可。ファイル送信にはSlack APIのfiles.uploadエンドポイントとOAuthトークンが必要 |

## 内部リンク候補

| リンク先 | 種別 | 配置場所 |
|---------|------|---------|
| gas/gas-basics | 同カテゴリ（ピラー）必須 | 冒頭導線 + まとめ |
| gas/gas-spreadsheet-automation | 同カテゴリ | H2-3 ステップ2 + H2-5 |
| gas/gas-line-bot | 同カテゴリ | H2-5 応用例 + まとめ |
| discord-bot/discord-bot-gas | 別カテゴリ | まとめCTA |

## ライターへの指示

1. **Webhook URLのスクリプトプロパティ管理必須**: `PropertiesService.getScriptProperties().getProperty('SLACK_WEBHOOK_URL')` を使用。ハードコード禁止
2. **全コードにtry-catch + レスポンスコード確認**: 全競合が欠落している最大の差別化ポイント
3. **Block Kit + メンション**: 競合がほぼカバーしていない差別化要素
4. **スプレッドシートSlack連携**: 副KWを自然に使いつつ、値読み取り→通知の実装を含める
5. **表を最低3つ**: 前提条件、トラブルシューティング、制限事項
