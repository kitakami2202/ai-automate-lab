# リファインメントブリーフ: ai-coding-prompt-patterns

## 基本情報
- 対象ファイル: src/content/articles/ai-api/ai-coding-prompt-patterns.md
- 監査日: 2026-02-12
- 総合スコア: 75/100
- 判定: REFINE

## スコアサマリ
| カテゴリ | スコア | 主な減点理由 |
|---------|--------|-------------|
| コンテンツ品質 | 14/20 | H2-2~H2-4の定義文なし(-2)、パターンの解説深度不足(-2)、テンプレートから生成されるコード例が1つもない(-2) |
| SEO/AEO品質 | 13/20 | primary_kw「AI コード生成 プロンプト」がtitle/本文に明示出現しない(-3)、secondary_kw「AI コーディング 指示」未出現(-2)、description 117文字で下限未満(-1)、FAQ最低ライン(-1) |
| 内部リンク・導線 | 16/20 | relatedArticlesが同カテゴリ1本+別カテゴリ2本で比率逆転(-2)、ai-api-overviewへのリンクなし(-2) |
| 可読性・文体 | 17/20 | 「GAS」「Webhook」「Block Kit」「tqdm」「pathlib」の初出時説明なし(-3) |
| 鮮度・正確性 | 15/20 | FAQ内「AIコーディングツール比較記事をご覧ください」にリンクなし(-2)、tagsの「Claude Code」が内容と不一致(-2)、パターン6のonFormSubmitセキュリティ注意なし(-1) |

## 構造分析
- H2数: 5（上限ぴったり）
- H3数: 9（パターン1-9）
- 表の数: 2（基本構造表 + パターン選択ガイド表）
- コードブロック数: 9（全てプロンプトテンプレートtext、実行可能コードなし）
- 内部リンク数: 10本（冒頭2 + 本文4 + 選択ガイド表4）
- FAQ数: 3（最低ライン）
- title: 21文字（制限内）
- description: 117文字（120-160文字の推奨下限をやや下回る）
- 本文文字数: 約2,200字

## セクション別判定
| セクション | 判定 | 理由 |
|-----------|------|------|
| frontmatter | IMPROVE | descriptionが117文字で下限未満。tagsの「Claude Code」は内容と不一致。relatedArticlesの同カテゴリ比率が逆。FAQ3個で最低ライン |
| 導入部（冒頭） | KEEP | Layer2→Layer1の導線が冒頭blockquoteで明確。結論ファースト（9パターン、コピペで使える）も達成 |
| H2-1: プロンプトの基本構造 | KEEP | 定義文あり、4要素の表が明快。AI引用にも適した構造 |
| H2-2: GAS系パターン | IMPROVE | 定義文（H2直後の導入文）なし。パターン1-3は実用的だが「なぜこの構造が有効か」の解説がない。パターン3のリンク先は充実 |
| H2-3: 通知Bot系パターン | IMPROVE | 定義文なし。パターン4-6のリンク先は充実。パターン4-6にチェックポイントがない（パターン1-3にはある） |
| H2-4: Python系パターン | IMPROVE | 定義文なし。パターン7-9にリンク先記事がなく導線が途切れている。チェックポイントもない。選択ガイド表にもPython系が含まれていない |
| パターン選択ガイド | IMPROVE | Python系パターン7-9がガイド表に含まれていない。末尾の導線文は良いが、ピラー記事（ai-api-overview）へのリンクがない |

## 改善指示一覧（優先度順）

### 指示1: primary_kwとsecondary_kwを本文中に自然配置
- 対象: 導入部およびH2-1
- 何を: 「AI コード生成 プロンプト」「AI コーディング 指示」を本文中に1回以上自然に配置
- なぜ: primary_kw「AI コード生成 プロンプト」がtitleでは「AIにコードを書かせるプロンプトパターン集」と言い換えられており、本文中にも明示形が一度も出現しない。secondary_kw「AI コーディング 指示」も未出現
- 方向性: 導入部で「AIコード生成に使えるプロンプトを〜」、H2-1で「AIへのコーディング指示を構造化すると〜」のように織り込む

### 指示2: H2-2, H2-3, H2-4に定義文（導入文）を追加
- 対象: 各H2の直後
- 何を: そのセクションの要約となる定義文を1文追加
- なぜ: CLAUDE.md「『〇〇とは、△△です。』の定義文をセクション冒頭に含める」に違反。AEOでもセクション冒頭の文がスニペット抽出の対象になりやすい
- 方向性:
  - H2-2: 「GAS系パターンとは、Google Apps Scriptで業務データの処理・メール送信・API連携を自動化するためのプロンプトテンプレートです。」
  - H2-3: 「通知Bot系パターンとは、Discord・Slack・Googleフォームと連携して業務通知を自動化するためのプロンプトテンプレートです。」
  - H2-4: 「Python系パターンとは、CSVやExcelなどのローカルファイルを対象にAI APIやファイル操作を自動化するためのプロンプトテンプレートです。」

### 指示3: パターン選択ガイド表にPython系パターン7-9を追加
- 対象: 末尾の「パターン選択ガイド」表
- 何を: パターン7（AIバッチ処理）, パターン8（ファイル整理）, パターン9（レポート生成）の行を追加
- なぜ: 9パターンを紹介しておきながら選択ガイドが6パターンしかないのは不完全。読者がPython系パターンの使い分けを判断できない
- 方向性:
  - AI一括処理 → パターン7 → 関連記事なし（「準備中」等で明示）
  - ファイル整理 → パターン8 → 同上
  - レポート生成 → パターン9 → 同上

### 指示4: 通知Bot系・Python系パターンにチェックポイントを追加
- 対象: パターン4, 5, 6, 7, 8, 9
- 何を: GAS系パターン1-3と同様に「**チェックポイント:**」を追加
- なぜ: パターン1-3にはあるがパターン4-9にはなく、品質にムラがある。CLAUDE.md「生成されたコードは必ず動作確認が必要」の方針にも合致
- 方向性:
  - パターン4: 「Webhook URLが正しいか、テスト用チャンネルで送信確認すること」
  - パターン5: 「通知済みフラグのリセット漏れに注意。テスト時はテスト用チャンネルを使用」
  - パターン6: 「onFormSubmitトリガーの設置を忘れずに。テスト時はフォームから実際に回答を送信して確認」
  - パターン7: 「大量データの場合はまず10行でテスト実行し、API利用料を確認してから全件処理」
  - パターン8: 「必ずドライランモードで移動先を確認してから実行すること」
  - パターン9: 「出力PDFの日本語フォントが文字化けしていないか確認」

### 指示5: descriptionを120-160文字に拡張
- 対象: frontmatter description
- 何を: 現在117文字を120文字以上に拡張
- なぜ: CLAUDE.md「description は120-160文字」の基準をわずかに下回る
- 方向性: 末尾「判断基準も解説します。」→「判断基準も解説。コピペして使えます。」等で微調整

### 指示6: relatedArticlesの同カテゴリ比率を修正
- 対象: frontmatter relatedArticles
- 何を: 同カテゴリ(ai-api)を2本 + 別カテゴリ1本に修正
- なぜ: CLAUDE.md「同カテゴリ2本 + 別カテゴリ1本」。現状は同カテゴリ1本(claude-code-automation) + 別カテゴリ2本(prompt-engineering-business, ai-coding-tools-comparison)
- 方向性: ai-coding-non-engineer（同カテゴリ）を追加し、reviews/ai-coding-tools-comparisonまたはframeworks/prompt-engineering-businessを外す。推奨:
  ```yaml
  relatedArticles:
    - "ai-api/claude-code-automation"
    - "ai-api/ai-coding-non-engineer"
    - "frameworks/prompt-engineering-business"
  ```

### 指示7: 専門用語の初出時説明を追加
- 対象: 本文全体の初出箇所
- 何を: 以下の用語に括弧書きまたは注釈で説明を追加
  - 「GAS」→「GAS（Google Apps Script: Googleスプレッドシートなどを自動操作するスクリプト環境）」
  - 「Webhook」→「Webhook（外部サービスにデータを送る仕組み）」
  - 「Block Kit」→「Block Kit（Slackのリッチメッセージ形式）」
  - 「Embed形式」→「Embed形式（Discordのリッチ表示フォーマット）」
  - 「tqdm」→「tqdm（Pythonの進捗バー表示ライブラリ）」
  - 「pathlib」→「pathlib（Pythonのファイルパス操作ライブラリ）」
- なぜ: CLAUDE.md「専門用語は初出時に必ず説明を付ける」。対象読者に「非エンジニア経営者・事務担当者」を含む

### 指示8: ピラー記事（ai-api-overview）へのリンクを追加
- 対象: 導入部 or 末尾
- 何を: ai-api-overviewへのリンクを1本追加
- なぜ: クラスター記事→ピラー記事への必須リンクが欠如。topic-clusters設計書の「クラスター → ピラー: 必ず1本」ルール
- 方向性: 末尾で「AI APIの業務活用全体像は[AI APIを業務に組み込む方法](/articles/ai-api/ai-api-overview)をご覧ください。」を追加

### 指示9: FAQ 4-5個目の追加
- 対象: frontmatter FAQ
- 何を: FAQ4個目・5個目を追加
- なぜ: 3個は最低ラインであり、reference記事としてカバーすべき質問がまだある
- 方向性:
  ```yaml
  - question: "パターンをカスタマイズするコツはありますか？"
    answer: "【制約】セクションに具体的な技術要件を追記すると精度が上がります。例えばエラー処理の方法、使用するライブラリのバージョン、コーディング規約などを明示してください。曖昧な指示ほどAIの出力もブレやすくなります。"
  - question: "GAS以外の言語でも同じパターンは使えますか？"
    answer: "はい、4要素（役割指定・タスク・入出力定義・制約条件）の構造はどの言語でも有効です。【役割指定】を「Pythonの〜」「TypeScriptの〜」に変えるだけで応用できます。"
  ```

### 指示10: tagsから「Claude Code」を削除または内容に合わせた修正
- 対象: frontmatter tags
- 何を: 「Claude Code」を削除し、代わりに「AI コード生成」「GAS」等を追加
- なぜ: 記事内容はClaude Code固有ではなく汎用プロンプトテンプレートである。FAQ1でも「主要なAIコーディングツールすべてで使えます」と明記しており、Claude Code固有タグは誤解を招く
- 方向性:
  ```yaml
  tags: ["プロンプト", "AIコーディング", "テンプレート", "業務自動化", "AI コード生成"]
  ```

## 保持すべき良い点
- 冒頭のblockquoteでLayer1記事2本（claude-code-automation, prompt-engineering-business）への導線が明確
- 結論ファーストで「9パターン」「コピペで使える」が冒頭2行にある
- H2-1「基本構造」の4要素表が簡潔で、全パターンの理解を助ける
- 全9パターンのプロンプト構造が統一（役割指定→タスク→入出力→制約）されており一貫性がある
- パターン3の「コードにAPIキーをハードコードしない」制約がCLAUDE.mdの禁止事項と合致
- パターン2の「テスト時は送信先を自分のアドレスに変更」等の実務的な注意書きが良い
- GAS系パターン3, 通知Bot系パターン4-6にそれぞれ関連記事へのリンクがあり、クラスター内の導線が意識されている
- パターン選択ガイド表で「やりたいこと→パターン→記事」の3段階導線が分かりやすい
- 敬体で統一されており、文体の揺れがない

## frontmatter修正指示
- title: 変更不要（21文字、簡潔で内容を表現）
- description: 120文字以上に微調整。例: 末尾を「判断基準も解説。そのままコピペで使えます。」に変更
- tags: 「Claude Code」→「AI コード生成」に変更
- faq: 4-5個目を追加（指示9参照）
- relatedArticles: 同カテゴリ2本に修正（指示6参照）
- schema: 変更不要（reference記事にArticleは適切）
