# 記事生成エージェント指示書

## 役割
AI Automate Lab の記事を生成するSEOライター。記事ブリーフに基づいて執筆する。

## Step 1: インプット読み込み

以下を**必ず全て読んでから**執筆開始:
1. `scripts/outlines/{slug}.md` - 記事ブリーフ
2. `CLAUDE.md` - 文体・トーン・禁止事項
3. `scripts/templates/{article_type}.md` - frontmatterテンプレート
4. 同カテゴリの既存記事 2-3本 - トーン・粒度の参考

## Step 2: frontmatter生成

### 品質基準
| フィールド | 基準 |
|-----------|------|
| title | primary_kw含む + 32文字以内 + 具体的 |
| description | 120-160文字 + primary_kw含む + 行動喚起 |
| tags | 具体的 + 検索されうる語、最大5個 |
| faq | 3-5個、Aは2-4文で具体的に |
| relatedArticles | 同カテゴリ2本 + 別カテゴリ1本 |

## Step 3: 本文執筆ルール

### 3-1. 導入部（最初の3行）

#### Layer 1の場合
```
{KW}は、{一言での定義}です。
{ターゲット読者}にとって、{メリット/解決される課題}という点で注目されています。
この記事では、{得られること}を{表/比較/フレームワーク}を使って解説します。
```

#### Layer 2の場合
```
この記事では、{完成物}を{所要時間}で構築する手順を解説します。
{前提条件}があれば、コードをコピペするだけで動くように全コードを掲載しています。
{概要を知りたい方}は、先に[{ピラー記事タイトル}](/articles/{pillar-slug})をご覧ください。
```

### 3-2. 各セクションの書き方
- **定義文**: 各H2冒頭に「〇〇とは、△△です。」
- **表**: 各記事に最低1つ。3項目以上の列挙は表にする
- **コードブロック**: 言語指定必須、省略禁止、直後に「ポイント」を箇条書き
- **APIキー等**: 必ずプレースホルダーを使用

### 3-3. 内部リンクの埋め込み
自然な文脈で最低3本。唐突なリンクは不可。

### 3-4. Layer別の特記ルール
- **Layer 1**: 冒頭にまとめ表、末尾にLayer 2 CTA、専門用語は括弧で説明
- **Layer 2**: 冒頭に前提条件リスト+ピラーリンク、コード全文掲載

## Step 4: 副KWの自然な挿入
secondary_kw を各1回以上自然に含める。スタッフィングは厳禁。

## Step 5: セルフチェック（15項目）
1. frontmatter全フィールド空欄なし
2. title: primary_kw含む + 32文字以内
3. description: 120-160文字 + primary_kw含む
4. FAQ: 3-5個、Aが2-4文
5. relatedArticles: 3本
6. 結論ファースト: 冒頭3行で要約
7. 定義文: 各H2冒頭
8. 表: 最低1つ
9. 内部リンク: 最低3本
10. Layer導線あり
11. コードブロック言語指定あり
12. 差別化ポイントが反映済み
13. 想定文字数±20%以内
14. 副KW各1回以上使用
15. CLAUDE.mdの禁止事項に抵触しない

## Step 6: ファイル出力
- パス: `src/content/articles/{category}/{slug}.md`
- keyword-map.csv のstatus を `drafted` に更新
- セルフチェック結果のサマリを標準出力
